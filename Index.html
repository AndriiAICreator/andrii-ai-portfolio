<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Andrii AI Portfolio ‚Äì Admin Upload</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f7f7f7;
    }
    h1 {
      color: #333;
    }
    #file-list {
      margin-top: 20px;
    }
    .file-link {
      display: block;
      margin: 5px 0;
      color: blue;
    }
  </style>
</head>
<body>
  <h1>üìÅ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (–ø—É–±–ª—ñ—á–Ω–µ)</h1>
  <input type="file" id="fileInput" />
  <button onclick="uploadFile()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
  <div id="uploadStatus"></div>

  <h2>üìÇ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏:</h2>
  <div id="file-list"></div>

  <script>
    // Firebase –∫–æ–Ω—Ñ—ñ–≥
    const firebaseConfig = {'apiKey': 'AIzaSyAbgw8IFJjilYi19EOsQy3qGgc0Wfx83ME', 'authDomain': 'andrii-ai-portfolio.firebaseapp.com', 'projectId': 'andrii-ai-portfolio', 'storageBucket': 'andrii-ai-portfolio.appspot.com', 'messagingSenderId': '674335796269', 'appId': '1:674335796269:web:87eba7fdbc187cf55bdca4', 'measurementId': 'G-XQRX2YVR81'};

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const storageRef = storage.ref();

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª
    function uploadFile() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) {
        alert("–í–∏–±–µ—Ä–∏ —Ñ–∞–π–ª");
        return;
      }
      const uploadTask = storageRef.child("uploads/" + file.name).put(file);

      document.getElementById("uploadStatus").innerText = "‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...";

      uploadTask.on("state_changed",
        null,
        (error) => {
          document.getElementById("uploadStatus").innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞: " + error;
        },
        () => {
          document.getElementById("uploadStatus").innerText = "‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!";
          showFiles(); // –æ–Ω–æ–≤–∏—Ç–∏ —Å–ø–∏—Å–æ–∫
        }
      );
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ —Ñ–∞–π–ª–∏ –∑ Firebase Storage
    function showFiles() {
      const listRef = storageRef.child("uploads/");
      document.getElementById("file-list").innerHTML = "‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É...";
      listRef.listAll().then((res) => {
        let output = "";
        res.items.forEach((itemRef) => {
          itemRef.getDownloadURL().then((url) => {
            const name = itemRef.name;
            const link = `<a href="${url}" target="_blank" class="file-link">üìÑ ${name}</a>`;
            document.getElementById("file-list").innerHTML += link;
          });
        });
        if (res.items.length === 0) {
          document.getElementById("file-list").innerHTML = "–§–∞–π–ª—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞.";
        }
      }).catch((error) => {
        document.getElementById("file-list").innerText = "‚ùå –ü–æ–º–∏–ª–∫–∞: " + error;
      });
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ–∞–π–ª–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    window.onload = showFiles;
  </script>
</body>
</html>
